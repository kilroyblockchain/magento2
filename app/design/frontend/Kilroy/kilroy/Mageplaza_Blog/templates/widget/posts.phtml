<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_Blog
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/** @var \Mageplaza\Blog\Block\Widget\Posts $block */

$posts = $block->getCollection();
?>
<div class="blog-widget-title"><a></a></div>
<div class="post-list-container mpcss" id="mpblog-list-container">
    <div class="widget-title">
        <a href="<?= $block->getBlogUrl(''); ?>"><?= $block->getTitle(); ?></a>
    </div>
    <div class="row">
      <div class="blog-homepage">
        <div class="owl-carousel owl-theme">
          <?php foreach ($posts as $post) : ?>
              <div class="post-list-item col-sm">
                  <div class="post-item-wraper">
                      <?php if ($post->getImage()) : ?>
                          <div class="post-image">
                              <a href="<?= $post->getUrl() ?>">
                                  <img class="img-responsive" style="height: 220px"
                                       src="<?= $block->resizeImage($post->getImage(), '400x'); ?>"
                                       alt="<?= $block->escapeHtml($post->getName()); ?>"/>
                              </a>
                          </div>
                      <?php endif; ?>
                      <div class="post-info-wraper">
                          <h2 class="mp-post-title" style="font-size: 22px">
                              <a class="post-link-title" title="<?= $post->getName(); ?>"
                                 href="<?= $post->getUrl() ?>">
                                  <?= $post->getName(); ?>
                              </a>
                          </h2>
                          <div class="mp-clearfix"></div>
                      </div>
                  </div>
              </div>
          <?php endforeach; ?>
        </div>
      </div>
    </div>
</div>

<script>
    require([
        'jquery',
        'owlCarousel'
        ], function ($) {
        'use strict';
        $(document).ready(function() {
          $('.owl-carousel').owlCarousel({
            loop: true,
            margin: 10,
            responsiveClass: true,
            responsive: {
              0: {
                items: 1,
                nav: true
              },
              600: {
                items: 3,
                nav: false
              },
              1000: {
                items: 4,
                nav: true,
                loop: false,
                margin: 20
              }
            }
          })
        });
    });
</script>
